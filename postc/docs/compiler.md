# PostC Compiler Implementation Documentation

## Overview

The PostC compiler is implemented in two stages:
1. A bootstrap compiler written in Python
2. A self-hosting compiler written in PostC

## Bootstrap Compiler (Python)

The bootstrap compiler is a simple compiler written in Python that can compile PostC source code into bytecode and execute it.

### Components

#### Lexer
The lexer (`bootstrap/lexer.py`) tokenizes PostC source code into a stream of tokens.

#### Parser
The parser (`bootstrap/parser.py`) parses tokens into an Abstract Syntax Tree (AST).

#### Code Generator
The code generator (`bootstrap/codegen.py`) generates bytecode from the AST.

#### Virtual Machine
The virtual machine (`bootstrap/vm.py`) executes the generated bytecode.

### Build Process

To build and run a PostC program with the bootstrap compiler:
```bash
python3 bootstrap/build.py <source_file>
```

## Self-Hosting Compiler (PostC)

The self-hosting compiler is written in PostC itself and can compile PostC source code.

### Components

#### Lexer
The lexer (`postc-compiler/lexer.pc`) tokenizes PostC source code.

#### Parser
The parser (`postc-compiler/parser.pc`) parses tokens into an AST.

#### Code Generator
The code generator (`postc-compiler/codegen.pc`) generates bytecode from the AST.

### Build Process

To build the self-hosting compiler:
```bash
./build-postc.sh
```

## Directory Structure

```
postc/
├── bootstrap/          # Bootstrap compiler (Python)
├── postc-compiler/     # Self-hosting compiler (PostC)
├── stdlib/             # Standard library
├── examples/           # Example programs
├── docs/               # Documentation
├── build-postc.sh      # Build script for self-hosting compiler
└── test-self-hosting.sh # Test script for self-hosting
```

## Compiling the Self-Hosting Compiler

1. First, use the bootstrap compiler to compile the self-hosting compiler:
   ```bash
   ./build-postc.sh
   ```

2. The compiled self-hosting compiler can then be used to compile PostC programs.

## Testing Self-Hosting

To test that the self-hosting compiler works correctly:
```bash
./test-self-hosting.sh
```

## Future Improvements

- Implement proper error handling and reporting
- Add support for arrays and dictionaries
- Implement a garbage collector for memory management
- Add optimization passes to the compiler
- Implement a standard library with more functions
- Add support for modules and imports